name: C++ CI Build

on: [push, pull_request] # 当你推送代码或创建 PR 时触发

jobs:
  build-and-test:
    runs-on: ubuntu-latest # 使用最新的 Ubuntu 环境

    steps:
    # 1. 检出你的代码
    - name: Checkout Repository
      uses: actions/checkout@v4

    # 2. 设置 C++ 环境（例如使用 C++17）
    - name: Set up C++ Environment
      uses: actions/setup-cpp@v4
      with:
        cpp-version: 17

    # 3. 配置 CMake 项目（这一步会自动生成 Makefile）
    - name: Configure CMake
      run: cmake -B build -DCMAKE_BUILD_TYPE=Release

    # 4. 执行构建（调用 make）
    - name: Build Project
      run: cmake --build build --parallel 4

    # 5. 运行测试（如果有的话）
    - name: Run Tests
      run: ctest --test-dir build --output-on-failure
